
\section{Description générale du problème}
\subsection{Introduction}

Pour ce projet d'informatique, nous avons décidé de prendre un sujet autre que ceux proposés par nos enseignants.  Ayant fait tous les deux une année zéro dans la marine nationale, un sujet proche de ce que l'on avait vécut semblait la solution évidente.

Nous sommes donc parti sur un jeu de type bataille navale, en temps réel et multijoueurs que nous avons nommé :

\begin{figure}[!h]
	\centering
	\includegraphics[width=0.7\linewidth]{../imgs/logo}
	\caption{Logo du projet d'informatique}
	\label{fig:logo}
\end{figure}

\subsection{Les différentes pistes envisagées}

Pour le choix de l'interface Homme-Machine (IHM) le choix s'est rapidement porté sur \textbf{PyQt5} pour sa polyvalence et sa programmation évènementielle. Concernant la connexion entre le serveur et les clients,  nous sommes tout d'abord partis sur la bibliothèque \textbf{sockets} qui permet de créer un tunnel simple entre deux clients. Nous avons finalement choisi \textbf{asyncio}, implémentée depuis python3, qui permet de gérer en asynchrone toutes les requêtes nécessaires au projet, et ce avec plusieurs clients en simultané.

\subsection{Différentes hypothèses réductrices choisies}

Pour réduire la taille du projet et surtout le rendre réalisable, nous avons choisi d'établir quelques réductions pour cette première partie : 
\begin{itemize}
	\item Le positionnement et le déplacement des joueurs et entités se fait une une grille de $8\times 8$ pixels.
	\item Les joueurs ne sont pas visibles par les autres joueurs.
	\item Le chat ne peut accueillir que du texte, donc pas de commande\\ (du type \emph{/help}.
	\item La vitesse de rafraichissement, ou le nombre de boucle de jeu par seconde est indépendant selon la classe.
	
\end{itemize}

\clearpage
\section{Application proprement dite}
\subsection{Présentation générale du programme}
Le programme est scindé en deux partie : le client et le serveur avec chacun son script pour le lancer. Le script \emph{test$\_$suite.py} permet de lancer tous les tests unitaires contenus dans le dossier \emph{tests}.

\subsubsection{Le serveur}
Lancer le serveur avec le script \emph{serveur.py}, crée un serveur sur l'hôte \emph{localhost} (127.0.0.1 ou 0.0.0.0). sur le port 25566.
Le serveur va ensuite accueillir les nouveaux joueurs, organiser le chat et gérer toutes les entités du jeu. Une fois lancé et opérationnel le terminal de commande ressemble à cela :

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{../imgs/serveur_screen}
	\caption{Ecran de fonctionnement du serveur}
	\label{fig:serveur_screen}
\end{figure}

Une fois lancé le serveur affichera les informations utiles telles que le nom de la machine sur laquelle il est lancé, son ip locale, le port de connexion et le nombre de joueur maximum (pas encore implémenté).

\subsubsection{Le client}
Une fois le serveur lancé en local, on peut soit se connecter à ce dernier, soit se connecter à un serveur que nous laisserons ouvert chez nous, pré-enregistré dans la liste des serveurs disponibles.

En démarrant le client avec le script \emph{client.py}, on se trouve devant l'écran de connexion du projet. (cf. \ref{fig:ecran_connexion})

Sur celui-ci l'utilisateur pourra retrouver les serveurs pré-enregistrés ainsi qu'une boite pour indiquer son pseudonyme, un bouton pour se connecter au serveur sélectionné. 

Enfin l'utilisateur trouvera  un bouton "Serveur local" pour entrer manuellement les informations de connexion au serveur (cf. \ref{fig:serveur_local})

\begin{figure}[H]
	\centering
	\includegraphics[width=0.8\linewidth]{../imgs/connexion_screen}
	\caption{Ecran de connexion client}
	\label{fig:ecran_connexion}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{../imgs/serveur local}
	\caption{Boite de dialogue de connexion manuelle à un serveur}
	\label{fig:serveur_local}
\end{figure}

Une fois connecté au serveur, l'utilisateur est face à l'écran de jeu (cf. \ref{fig:ecran_jeu}) qui comporte une surface de jeu, que nous appellerons \emph{canvas}, sur laquelle sera dessinée la carte, les entités et les joueurs. On y retrouve un radar permettant de détecter les entités aux alentours (attention pas entièrement fonctionnel pour l'instant), et une chatbox pour communiquer avec les autres joueurs présent sur le serveur.

\begin{figure}[H]
	\centering
	\includegraphics[width=1\linewidth]{../imgs/game_screen}
	\caption{Ecran de jeu du projet}
	\label{fig:ecran_jeu}
\end{figure}

Pour cette première phase, nous nous sommes concentré sur la structure du jeu. Par conséquent les contrôles joueur sont limités. Pour se déplacer l'utilisateur pourra utiliser les flèches du clavier dès que le focus est sur le canvas (un click souris sur le canvas suffit à récupérer le focus).

\subsection{Description des principales classes/méthodes}
% décrire uniquement les mécanismes fondamentaux

\clearpage
\section{Conclusion}
\subsection{Différents tests effectués}

\subsection{Limitations}

\subsection{Apports personnels par rapport au sujet initial}

\subsection{Perspectives d'amélioration}

